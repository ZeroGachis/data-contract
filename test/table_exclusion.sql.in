--
-- We assume that ddl_historization is installed in public schema
--

SET search_path=public,pgtap,_TEST_SCHEMA_;

BEGIN;

SELECT plan(1);

DROP EXTENSION IF EXISTS schedoc CASCADE;
CREATE EXTENSION schedoc WITH SCHEMA public CASCADE;
SELECT schedoc_start();

SELECT schedoc_exclude_tool('debezium');

TRUNCATE schedoc_column_raw;
TRUNCATE ddl_history;

-- create a table that should be excluded
CREATE TABLE dbz_signal (id int);

--

SELECT results_eq(
    'SELECT count(*) FROM schedoc_column_raw',
    'SELECT CAST(0 as bigint)',
    'We have 0 row in schedoc_column_raw');


ROLLBACK;
